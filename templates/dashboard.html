{% extends "base.html" %}

{% block content %}
<!-- Page Content Start -->
<div class="page-wrapper">
    <div class="container-xl">
        <!-- Page Title Section -->
        <div class="page-header d-print-none">
            <div class="row g-2 align-items-center">
                <div class="col">
                    <!-- Optional Subtitle or Breadcrumb -->
                    <div class="page-pretitle">
                        Dashboard
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Page Body -->
    <div class="page-body">
        <div class="container-xl">
            <div class="row row-deck row-cards">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            
                            <!-- Node Title/Badge -->
                            <h3 class="card-title">
                                <span class="badge bg-green">Node:1</span>
                            </h3>

                            <!-- CPU Usage Row -->
                            <div class="row">
                                <!-- CPU Usage Percentage -->
                                <div class="col-lg-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="subheader">CPU</div>
                                            </div>
                                            <div class="d-flex align-items-baseline">
                                                <div class="h2">{{ cpu*100 }}%</div>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar"
                                                     style="width: {{ cpu*100 }}%">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- CPU Memory Usage -->
                                <div class="col-lg-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="subheader">CPU: Memory Used</div>
                                            </div>
                                            <div class="d-flex align-items-baseline">
                                                <div class="h2">{{ cpu_mem }}%</div>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar"
                                                     style="width: {{ cpu_mem }}%">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div><!-- End CPU Usage Row -->

                            <!-- GPU Usage: Loop through each GPU -->
                            {% for i in range(0, num_gpus) %}
                            <div class="row">
                                <!-- GPU Utilization Percentage -->
                                <div class="col-lg-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="subheader">GPU{{ i+1 }}</div>
                                            </div>
                                            <div class="d-flex align-items-baseline">
                                                <div class="h2">{{ gpus[i][0]*100 }}%</div>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar"
                                                     style="width: {{ gpus[i][0]*100 }}%">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- GPU Memory Usage -->
                                <div class="col-lg-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center">
                                                <div class="subheader">GPU{{ i+1 }}: Memory Used</div>
                                            </div>
                                            <div class="d-flex align-items-baseline">
                                                <div class="h2">{{ gpus[i][1] }}%</div>
                                            </div>
                                            <div class="progress">
                                                <div class="progress-bar bg-info" role="progressbar"
                                                     style="width: {{ gpus[i][1] }}%">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div><!-- End GPU Row -->
                            {% endfor %}

                        </div><!-- /.card-body -->
                    </div><!-- /.card -->
                </div><!-- /.col-lg-12 -->
            </div><!-- /.row -->
        </div><!-- /.container-xl -->
    </div><!-- /.page-body -->
</div><!-- /.page-wrapper -->
<!-- Page Content End -->
{% endblock %}
